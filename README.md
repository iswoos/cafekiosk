![img.png](img.png)

<h2>단위 테스트란</h2>
- 작은 코드 단위를 독립적으로 검증하는 테스트
  - 작은 -> 클래스 or 메서드
  - 독립적 -> 외부에 의존하는 게 아닌, 독립적으로 검증할 수 있는 단위
- 검증 속도가 빠르고, 안정적임 

<h2>Junit 5</h2>
- 단위 테스트를 위한 테스트 프레임워크
- 켄트백이 만듦 (XUnit 시리즈으로 시작하여 Java진영에서는 JUnit이 됨)

<h2>AssertJ</h2>
- 테스트 코드 작성을 원활하게 돕는 테스트 라이브러리 (JUnit에 얹어서 사용할 것임)
- 풍부한 API, 메서드 체이닝 지원

<h2>Lombok</h2>
- @Data, @Setter, @AllArgsConstructor 지양
- 양방향 연관관계 시, @ToString 순환 참조 문제 발생함 (그래서 DTO에만 쓰는편)

<h2>Spring</h2>
- IOC (Inversion of Control)
  - 객체의 생명주기에 대한 관리를 IOC를 통해 함. A객체가 B객체를 필요로 할 경우, 제 3자인 IOC가 B객체를 생성하여 관리를 주입하여 관리해줌 (제어권이 제3자에게 넘어감)
- DI (Dependency Injection)
  - 의존성 역전법칙, 컨테이너라는 제 3자가 주입해주는 객체를 사용함. 약한 결합이 진행됨 (강결합 아님)
- AOP (Aspect Oriented Programming)
  - 비즈니스 흐름과 관계없는 부분 (트랜잭션, 로깅 등등)을 관점이라 부르며, 해당 부분을 공통적으로 처리해주게끔 하는 걸 뜻하는 용어. 스프링에서는 Proxy를 사용해서 구현함

<h2>MockMvc</h2>
Mock(가짜) 객체를 사용해 스프링 MVC동작을 재현할 수 있는 테스트 프레임워크

<h2>Test Double</h2>
- Dummy
  - 아무것도 하지 않는 깡통 객체
- Fake
  - 단순한 형태로 동일한 기능은 수행하나, 프로덕션에서 쓰기에는 부족한 객체 (ex. FakeRepository)
- Stub (상태를 검증하는 것이 목적)
  - 테스트에서 요청한 것에 대해 미리 준비한 결과물을 제공하는 객체, 그 외에는 응답하지 않는다.
- Spy
  - Stub이면서, 호출된 내용을 기록하여 보여줄 수 있는 객체. 일부는 실제 객체처럼 동작시키고 일부만 Stubbing할 수 있음
- Mock (행위를 검증하는 것이 목적)
  - 행위에 대한 기대를 명세하고, 그에 따라 동작하도록 만들어진 객체

<h2>더 나은 테스트를 작성하기 위한 구체적 조언</h2>
- 한 문단에 한 주제
  - 하나의 테스틑 한 주제만을 가져야 한다. (글쓰기와 같음, ProductTypeTest 코드 확인)
- 완벽하게 제어하기
  - 테스트를 할 때, 모든 조건을 완벽하게 제어할 수 있어야 한다. (CafeKioskTest 코드 확인)
- 테스트 환경의 독립성을 보장하자
  - 특정 기능에 대한 테스트를 진행할 때, 다른 기능을 굳이 붙혀 본래 테스트하고자 했던 것의 방향성을 혼잡스럽게 하는 상황을 피하자(OrderServiceTest 코드 참조)
  - 테스트 환경을 조성할 때는 최대한 생성자 기반으로 구성하는 것이 좋음
- 테스트 간 독립성을 보장하자
  - 공유자원을 씀으로써, 테스트가 단계별로 수행되었을 때에만 성공하는 식의, 그런 테스트 코드를 적지말자 => 순서관계없이, 개별로 주어진 주제에 대해서만 테스트할 수 있는 환경으로 진행하자
  - 하나의 객체가 변화하는 모습을 차례대로 테스트하고 싶을 경우, 아래에 기재한 @DynamicTest를 이용하면 됨
- 한 눈에 들어오는 Test Fixture 구성하기
  - Fixture : 고정물, 고정되어 있는 물체
  - 테스트를 위해 원하는 상태로 고정시킨 일련의 객체 (주로 given절에 기재되는 것들) (ProductServiceTest 코드 참조)
- Test Fixture 클렌징
  - deleteAll와 deleteAllInBatch 차이점 학습 (OrderServiceTest 코드 참조)
- @ParameterizedTest
  - 값이나 환경을 바꿔가면서 테스트를 여러번 반복하여 테스트를 확장하고 싶을 때 사용하는 Junit 어노테이션 (ProductTypeTest 코드 참조)

==========================================================================================
상품 번호 리스트를 받아 주문 생성하기
주문은 주문 상태, 주문 등록 시간을 가진다
주문의 총 금액을 계산할 수 있어야 한다

주문 생성 시 재고 확인 및 개수 차감 후 생성하기
재고는 상품번호를 가진다
재고와 관련있는 상품 타입은 병 음료, 베이커리이다.

관리자 페이지에서 신규 상품을 등록할 수 있다.
상품명, 상품타입, 판매상태, 가격 등을 입력 받는다.